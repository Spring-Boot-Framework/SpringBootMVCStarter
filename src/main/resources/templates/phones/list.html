<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"
	layout:decorator="layout/main">
<head lang="pl">
</head>
<body>
	<div layout:fragment="script">
		<script th:src="@{/datatables/jquery.dataTables.min.js}"
			type="text/javascript"></script>
		<script th:src="@{/datatables/dataTables.helper.js}"
			type="text/javascript"></script>
		<script th:src="@{/datatables/buttons.flash.min.js}"
			type="text/javascript"></script>
		<script th:src="@{/datatables/buttons.html5.min.js}"
			type="text/javascript"></script>
		<script th:src="@{/datatables/buttons.print.min.js}"
			type="text/javascript"></script>
		<script th:src="@{/datatables/dataTables.buttons.min.js}"
			type="text/javascript"></script>
		<script th:src="@{/datatables/jszip.min.js}" type="text/javascript"></script>
		<script th:src="@{/datatables/pdfmake.min.js}" type="text/javascript"></script>
		<script th:src="@{/datatables/vfs_fonts.js}" type="text/javascript"></script>
		<script th:if="__${#locale}__ == 'pl'">
			$('#srv')
					.DataTable(
							{
								paging : false,
								language : {
									url : getUrl() + "polish.json",
								},
								order : [ [ 0, 'desc' ] ],
								dom : 'Bfrtip',
								buttons : [
										{
											extend : 'copy',
											text : 'Kopiuj do schowka'
										},
										{
											extend : 'csv',
											text : 'CSV'
										},
										{
											extend : 'excel',
											text : 'Excel'
										},
										{
											extend : 'pdfHtml5',
											orientation : 'portrait'
										},
										{
											extend : 'print',
											text : 'Drukuj',
											customize : function(win) {
												/* Style for the table */
												$(win.document.body)
														.addClass(
																'asset-print-body')
														.css(
																{
																	backgroundImage : 'none',
																	width : '100%'
																});
												/* Style for the table */
												$(win.document.body).find(
														'table').addClass(
														'table').css({
													width : '100%'
												});

												/* Style for the table */
												$(win.document.body)
														.find('td')
														.addClass('cell')
														.css(
																{
																	borderBottom : '1px dotted black',
																	textAlign : 'center'
																});
											}
										} ]
							});
		</script>
		<script th:if="__${#locale}__ == 'en'">
			$('#srv')
					.DataTable(
							{
								paging : false,
								language : {
									url : getUrl() + "english.json"
								},
								order : [ [ 0, 'desc' ] ],
								dom : 'Bfrtipp',
								buttons : [
										{
											extend : 'copy',
											text : 'Copy to clipboard'
										},
										{
											extend : 'csv',
											text : 'CSV'
										},
										{
											extend : 'excel',
											text : 'Excel'
										},
										{
											extend : 'pdfHtml5',
											orientation : 'landscape'
										},
										{
											extend : 'print',
											text : 'Print',
											customize : function(win) {
												/* Style for the table */
												$(win.document.body)
														.addClass(
																'asset-print-body')
														.css(
																{
																	backgroundImage : 'none',
																	width : '100%'
																});
												/* Style for the table */
												$(win.document.body).find(
														'table').addClass(
														'table').css({
													width : '100%'
												});

												/* Style for the table */
												$(win.document.body)
														.find('td')
														.addClass('cell')
														.css(
																{
																	borderBottom : '1px dotted black',
																	textAlign : 'center'
																});
											}
										} ]
							});
		</script>
		<script th:if="__${#locale}__ == 'it'">
			$('#srv')
					.DataTable(
							{
								paging : false,
								language : {
									url : getUrl() + "italian.json"
								},
								order : [ [ 0, 'desc' ] ],
								dom : 'Bfrtipp',
								buttons : [
										{
											extend : 'copy',
											text : 'Copia'
										},
										{
											extend : 'csv',
											text : 'CSV'
										},
										{
											extend : 'excel',
											text : 'Excel'
										},
										{
											extend : 'pdfHtml5',
											orientation : 'landscape'
										},
										{
											extend : 'print',
											text : 'Stampa',
											customize : function(win) {
												/* Style for the table */
												$(win.document.body)
														.addClass(
																'asset-print-body')
														.css(
																{
																	backgroundImage : 'none',
																	width : '100%'
																});
												/* Style for the table */
												$(win.document.body).find(
														'table').addClass(
														'table').css({
													width : '100%'
												});

												/* Style for the table */
												$(win.document.body)
														.find('td')
														.addClass('cell')
														.css(
																{
																	borderBottom : '1px dotted black',
																	textAlign : 'center'
																});
											}
										} ]
							});
		</script>
	</div>
	<div layout:fragment="content">
		<div class="row">
			<a th:href="@{/}" class="btn btn-link btn-sm"> <span
				class="glyphicon glyphicon-menu-left"></span> <span
				th:text="#{action.back}">back</span>
			</a>
			<a th:href="@{/phones/print}" class="btn btn-link btn-sm"> <span
				class="glyphicon glyphicon-menu-left"></span> <span
				th:text="#{action.print}">back</span>
			</a>
		</div>

		<div class="underline margin-top-20"></div>

		<!-- ADMIN PANEL -->
		<div sec:authorize="hasAnyRole('ROLE_ADMIN')"
			class="panel panel-primary">
			<div class="panel-heading">
				<span th:text="#{general.panel.admin}"></span>
			</div>
			<div class="panel-body">
				<div class="row">
					<!-- NUMBER SIDE -->
					<div class="col-xs-12">
						<!-- NUMBER FORM -->
						<form th:action="@{/phones/numberaction}" method="post"
							th:object="${phoneEditForm}">
							<div class="row margin-top-20">
								<div class="col-xs-2">
									<div class="form-group">
										<label for="ph_number" th:text="#{phones.number}">lbl</label>
										<input type="text" class="form-control" id="ph_number"
											name="ph_number" th:placeholder="#{phones.number}"
											th:field="*{number}" autocomplete="off" />
										<div th:errors="*{number}"
											class="alert alert-danger margin-top-5">error</div>
									</div>
								</div>
								<div class="col-xs-5">
									<div class="form-group">
										<label for="ph_name" th:text="#{phones.name}">lbl</label> <input
											type="text" class="form-control" id="ph_name" name="ph_name"
											th:placeholder="#{phones.name}" th:field="*{name}"
											autocomplete="off" />
										<div th:errors="*{name}"
											class="alert alert-danger margin-top-5">error</div>
									</div>
								</div>
								<div class="col-xs-5">
									<div class="form-group">
										<label for="pc_category"
											th:text="#{general.category}">lbl</label> <select
											class="form-control" id="pc_category" name="pc_category"
											th:placeholder="#{phones.category}"
											th:field="*{categoryId}">
											<option th:each="obj,stat : ${categories}"
												th:value="${categories[__${stat.index}__].id}"
												th:text="|
								${categories[__${stat.index}__].order} - ${categories[__${stat.index}__].name}  #${categories[__${stat.index}__].id} 
								|">opt</option>
										</select>
										<div th:errors="*{categoryId}"
											class="alert alert-danger margin-top-5">error</div>
									</div>
								</div>
</div>
						<div class="row">
								<div class="col-xs-7">
									<button class="btn btn-success btn-sm" type="submit"
										name="create" th:value="1">
										<span class="glyphicon glyphicon-save"></span> <span
											th:text="#{action.create}"></span>
									</button>
									<button class="btn btn-primary btn-sm" type="submit"
										name="update">
										<span class="glyphicon glyphicon-ok"></span> <span
											th:text="#{action.update}"></span>
									</button>
									<button class="btn btn-danger btn-sm" type="submit"
										name="delete">
										<span class="glyphicon glyphicon-remove"></span> <span
											th:text="#{action.delete}"></span>
									</button>
									</div>
									<div class="col-xs-5">
									<button class="btn btn-primary btn-sm float-right" type="submit"
										name="editcategory">
										<span class="glyphicon glyphicon-flag"></span> <span
											th:text="#{phones.editcategories}"></span>
									</button>
								</div>
							</div>
						</form>
						<!-- /NUMBER FORM -->
					</div>
					<!-- /NUMBER SIDE -->
				</div>
			</div>
		</div>
		<!-- /ADMIN PANEL -->
		<!-- LIST PANEL -->
		<div class="panel panel-primary">
			<div class="panel-heading">
				<span th:text="#{phone.numbers}"></span>
			</div>
			<div class="panel-body">
				<div class="table-responsive margin-top-10">
					<table id="srv" class="display">
						<thead>
							<tr>
								<th th:text="#{phones.number}"></th>
								<th th:text="#{phones.name}|"></th>
								<th th:text="#{general.category}"></th>
							</tr>
						</thead>
						<tfoot>
							<tr>
								<th th:text="#{phones.number}"></th>
								<th th:text="#{phones.name}|"></th>
								<th th:text="#{general.category}"></th>
							</tr>
						</tfoot>
						<tbody>
							<tr th:each="entry : ${list}">
								<td><span th:text="${entry.number}"></span></td>
								<td><span th:text="${entry.name}"></span></td>
								<td><span th:text="${entry.category.name}"></span></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
		<!-- /LIST PANEL -->

	</div>
</body>
</html>