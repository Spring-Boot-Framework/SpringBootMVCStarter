<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"
	layout:decorator="layout/main">
<head lang="pl">
</head>
<body>
	<div layout:fragment="script">
		<script>
			document.getElementById('file').onchange = function(evt) {
				readURL(this);
				document.getElementById('filename').textContent = this.value;
				document.getElementById('hidediv').style.display = 'block';
			};
			function readURL(input) {
				if (!input.files) {
					return;
				}
				if (!input.files[0]) {
					return;
				}
				if(input.files[0].size > 2097000){
					alert("limit 2MB")
				}
				var reader = new FileReader();
				reader.onload = function(e) {
					$('#prev').attr('src', e.target.result);
				}
				reader.readAsDataURL(input.files[0]);
			}
		</script>
		<!-- DATATABLES -->
		<script th:src="@{/datatables/jquery.dataTables.min.js}"
			type="text/javascript"></script>
		<script th:src="@{/datatables/dataTables.helper.js}"
			type="text/javascript"></script>
		<script th:src="@{/datatables/buttons.flash.min.js}"
			type="text/javascript"></script>
		<script th:src="@{/datatables/buttons.html5.min.js}"
			type="text/javascript"></script>
		<script th:src="@{/datatables/buttons.print.min.js}"
			type="text/javascript"></script>
		<script th:src="@{/datatables/dataTables.buttons.min.js}"
			type="text/javascript"></script>
		<script th:src="@{/datatables/jszip.min.js}" type="text/javascript"></script>
		<script th:src="@{/datatables/pdfmake.min.js}" type="text/javascript"></script>
		<script th:src="@{/datatables/vfs_fonts.js}" type="text/javascript"></script>
		<!-- entries table -->
		<script th:if="__${#locale}__ == 'pl'">
			$('#srv').DataTable({
				language : {
					url : getUrl() + "polish.json",
				},
				order : [ [ 0, 'asc' ] ],
				paging: true,
				dom : 'Bfrtip',
				buttons : [
						{
							extend : 'excel',
							text : 'Excel'
						},
						{
							extend: 'pdfHtml5',
			                orientation: 'portrait'
						}
						]
			});
		</script>
		<script th:if="__${#locale}__ == 'en'">
			$('#srv').DataTable({
				language : {
					url : getUrl() + "english.json"
				},
				order : [ [ 0, 'asc' ] ],
				paging: true,
				dom : 'Bfrtip',
				buttons : [
						{
							extend : 'excel',
							text : 'Excel'
						},
						{
							extend: 'pdfHtml5',
			                orientation: 'portrait'
						}
						]
			});
		</script>
		<script th:if="__${#locale}__ == 'it'">
			$('#srv').DataTable({
				language : {
					url : getUrl() + "italian.json"
				},
				order : [ [ 0, 'asc' ] ],
				paging: true,
				dom : 'Bfrtip',
				buttons : [
						{
							extend : 'excel',
							text : 'Excel'
						},
						{
							extend: 'pdfHtml5',
			                orientation: 'portrait'
						}
						]
			});
		</script>
	</div>
	<div layout:fragment="content">
		<div class="row">
			<div class="col-xs-12">
				<h1 th:text="#{prodcomp.title}" class="text-primary"></h1>
			</div>
			<div class="col-xs-12 col-xs-offset-0 text-justify margin-top-10">
				<span th:text="#{prodcomp.message}"> Welcome message </span>
			</div>
			<a th:href="@{'/'}" class="btn btn-link btn-sm"> <span
				class="glyphicon glyphicon-menu-left"></span> <span
				th:text="#{action.back}">back</span>
			</a>
		</div>
		<!-- PHOTOS FORM -->
		<form th:action="@{'/upload/prodcomp'}" method="post"
			enctype="multipart/form-data">
			<div class="row">
				<!-- left -->
				<div class="col-xs-12">
					<h1 th:text="#{action.choose}" class="text-primary margin-top-30"></h1>
				</div>
				<div class="col-xs-12">
					<input type="file" id="file" name="file" style="display: none" />
					<label for="file" class="btn btn-info"> <span
						th:text="#{action.choose}"></span>
					</label>
					<button class="btn btn-primary" type="submit" name="upload"
						th:title="|#{general.warning.longtask} ~60-120s|"
						onClick="this.disabled=true;"
							data-toggle="tooltip" data-placement="bottom"
					>
						<span th:text="#{action.upload}">upload</span>
					</button>

					<div id="hidediv" style="display: none;" class="margin-top-20">
						<span id="filename" class="margin-top-10 text-muted">[file]</span>
					</div>
				</div>
			</div>
		</form>
		<div class="row" th:if="${components}">
			<div class="col-xs-12">
				<h1 th:text="#{general.list}" class="text-primary"></h1>
			</div>
			<div class="col-xs-12">
				<div class="table-responsive">
					<table id="srv" class="display" style="font-size: 90%;">
						<thead>
							<tr>
								<th th:text="#{general.productCode}">head</th>
								<th th:text="#{general.productDescription}">head</th>
								<th th:text="#{general.quantity}">head</th>
							</tr>
						</thead>
						<tfoot>
							<tr>
								<th th:text="#{general.productCode}">head</th>
								<th th:text="#{general.productDescription}">head</th>
								<th th:text="#{general.quantity}">head</th>
							</tr>
						</tfoot>
						<tbody>
							<tr th:each="line : ${components}">
								<td><span th:text="${line[0]}"></span></td>
								<td><span th:text="${line[1]}"></span></td>
								<td><span th:text="${#numbers.formatDecimal(line[2], 1, 'DEFAULT', 0, 'DEFAULT')}"></span></td>
	
							</tr>

						</tbody>
					</table>
				</div>

			</div>
		</div>
	</div>
</body>
</html>